{%load static%}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!--Remix icon cdn-->
	<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
	<!-- Boxicons -->
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<!-- My CSS -->
	
    <link rel="stylesheet" type="text/css" href="{% static 'developerpanel.css' %}">
	<title>Educator's Dashboard</title>
</head>
<body>


	<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="#" class="brand">
			<i class='bx bxs-smile'></i>
			<span class="text">Create Template</span>
		</a>
		<ul class="side-menu top">
			<li class="active">
				<a href="#">
					<i class='bx bxs-dashboard' ></i>
					<span class="text">Dashboard</span>
				</a>
			</li>
			<li>
				<a href="#">
					<i class='bx bxs-shopping-bag-alt' ></i>
					<span class="text">My Profile</span>
				</a>
			</li>
			<li>
				<a href="#">
					<i class='bx bxs-doughnut-chart' ></i>
					<span class="text">Analytics</span>
				</a>
			</li>
			<li>
				<a href="#">
					<i class='bx bxs-message-dots' ></i>
					<span class="text">Message</span>
				</a>
			</li>
			<li>
				<a href="#">
					<i class='bx bxs-group' ></i>
					<span class="text">Team</span>
				</a>
			</li>
			<li>
				<a href="#">
					<i class=" bx ri-database-line"></i>
					<span class="text">Resource</span>
				</a>
			</li>
			<li>
				<a href="/googlemeet/">
					<i class=" bx ri-chat-2-line"></i>					
					<span class="text">Meeting</span>
				</a>
			</li>
		</ul>
		<ul class="side-menu">
			<li>
				<a href="#">
					<i class='bx bxs-cog' ></i>
					<span class="text">Settings</span>
				</a>
			</li>
			<li>
				<a href="#" class="logout">
					<i class='bx bxs-log-out-circle' ></i>
					<span class="text">Logout</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->



	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu' ></i>
			<a href="#" class="nav-link">Categories</a>
			<form action="#">
				<div class="form-input">
					<input type="search" placeholder="Search...">
					<button type="submit" class="search-btn"><i class="ri-search-eye-line"></i></button>
				</div>
			</form>
			<input type="checkbox" id="switch-mode" hidden>
			<label for="switch-mode" class="switch-mode"></label>
			<a href="#" class="notification">
				<i class='bx bxs-bell' ></i>
				<span class="num">10</span>
			</a>
			<a href="#" class="profile">
				<img src="img/people.png">
			</a>
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
			<div class="center">
				<form action="" method="POST">
                {% csrf_token %}
                <!--  -->
                {{form.media}}
                <!--  -->
				
                <div id="curriculumn" class="form-control large-form" >{{ form.body }}</div>
                <button >Submit</button>
				

              </form></div>

			  
		</main>

		<!-- MAIN -->
	</section>
	<!-- CONTENT -->
	

	<script src="{% static 'developerpanel.js' %}"></script>
	<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
	<script>
		let orginal_length =0;
	const button = document.getElementById("tohtmlbutton");
	var formBodyElement = document.getElementById('curriculumn');
	if (formBodyElement) {
		var jsonContent = formBodyElement.textContent; 
		orginal_length=jsonContent.length;
		console.log(jsonContent.length);}


    // Add a "click" event listener to the button
    button.addEventListener("click", function() {
		var formBodyElement = document.getElementById('curriculumn');
		if (formBodyElement) {
			var jsonContent = formBodyElement.textContent;
			console.log(jsonContent.length);
			
			try {
				console.log("hello")
				var jsonData = JSON.parse(jsonContent.substring(0,orginal_length));
				console.log(jsonData);

			} catch (error) {
				console.log("Failed to parse JSON content:", error);
			}
		} else {
			console.log("Form body element not found.");
		}
		const edjsHTML = require("editorjs-html");
		const edjsParser = edjsHTML();
		const HTML = edjsParser.parse(jsonData);
		// returns array of html strings per block
		console.log(HTML);
		
    });
	</script>
	

</body>